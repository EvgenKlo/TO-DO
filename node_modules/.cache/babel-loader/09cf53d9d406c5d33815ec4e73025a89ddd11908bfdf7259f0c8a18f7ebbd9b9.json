{"ast":null,"code":"import _objectSpread from\"E:/to-do/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Actions}from'../../types/types';var localStorageData=localStorage.getItem('01MyToDoList23');var initialState=localStorageData?JSON.parse(localStorageData):[{name:'New project',description:'Test project',id:1,tasks:[]}];export function projectsReducer(){var _state$find,_state$find$tasks;var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case Actions.AddProject:state.push(action.payload);return state;case Actions.AddTask:(_state$find=state.find(function(item){return item.id===action.payload.project;}))===null||_state$find===void 0?void 0:(_state$find$tasks=_state$find.tasks)===null||_state$find$tasks===void 0?void 0:_state$find$tasks.push(action.payload.task);localStorage.setItem('01MyToDoList23',JSON.stringify(state));return state;case Actions.EditTask:state=state.map(function(item){var _item$tasks;return item.id===action.payload.projectId?_objectSpread(_objectSpread({},item),{},{tasks:(_item$tasks=item.tasks)===null||_item$tasks===void 0?void 0:_item$tasks.map(function(task){return task.number===action.payload.task.number?action.payload.task:task;})}):item;});localStorage.setItem('01MyToDoList23',JSON.stringify(state));return state;case Actions.ChangeStatus:state=state.map(function(item){var _item$tasks2;return item.id===action.payload.projectId?_objectSpread(_objectSpread({},item),{},{tasks:(_item$tasks2=item.tasks)===null||_item$tasks2===void 0?void 0:_item$tasks2.map(function(task){return task.number===action.payload.taskNumber?_objectSpread(_objectSpread({},task),{},{status:action.payload.taskStatus}):task;})}):item;});localStorage.setItem('01MyToDoList23',JSON.stringify(state));return state;default:return state;}}","map":{"version":3,"names":["Actions","localStorageData","localStorage","getItem","initialState","JSON","parse","name","description","id","tasks","projectsReducer","_state$find","_state$find$tasks","state","arguments","length","undefined","action","type","AddProject","push","payload","AddTask","find","item","project","task","setItem","stringify","EditTask","map","_item$tasks","projectId","_objectSpread","number","ChangeStatus","_item$tasks2","taskNumber","status","taskStatus"],"sources":["E:/to-do/src/store/reducers/ProjectsReducer.tsx"],"sourcesContent":["import { Actions, Project, Status, Task } from '../../types/types';\r\n\r\ninterface AddProject {\r\n  type: Actions.AddProject;\r\n  payload: Project;\r\n}\r\n\r\ninterface AddTask {\r\n  type: Actions.AddTask;\r\n  payload: {\r\n    project: number;\r\n    task: Task;\r\n  };\r\n}\r\n\r\ninterface EditTask {\r\n  type: Actions.EditTask;\r\n  payload: {\r\n    projectId: number;\r\n    task: Task;\r\n  };\r\n}\r\n\r\ninterface ChangeStatus {\r\n  type: Actions.ChangeStatus;\r\n  payload: {\r\n    projectId: number;\r\n    taskNumber: number;\r\n    taskStatus: Status;\r\n  };\r\n}\r\n\r\ntype UserAction = AddProject | AddTask | EditTask | ChangeStatus;\r\n\r\nconst localStorageData = localStorage.getItem('01MyToDoList23');\r\n\r\nconst initialState: Project[] = localStorageData\r\n  ? (JSON.parse(localStorageData) as Project[])\r\n  : [{ name: 'New project', description: 'Test project', id: 1, tasks: [] }];\r\n\r\nexport function projectsReducer(state = initialState, action: UserAction): Project[] {\r\n  switch (action.type) {\r\n    case Actions.AddProject:\r\n      state.push(action.payload);\r\n      return state;\r\n    case Actions.AddTask:\r\n      state.find((item) => item.id === action.payload.project)?.tasks?.push(action.payload.task);\r\n      localStorage.setItem('01MyToDoList23', JSON.stringify(state));\r\n      return state;\r\n    case Actions.EditTask:\r\n      state = state.map((item) =>\r\n        item.id === action.payload.projectId\r\n          ? {\r\n              ...item,\r\n              tasks: item.tasks?.map((task) =>\r\n                task.number === action.payload.task.number ? action.payload.task : task\r\n              ),\r\n            }\r\n          : item\r\n      );\r\n      localStorage.setItem('01MyToDoList23', JSON.stringify(state));\r\n      return state;\r\n    case Actions.ChangeStatus:\r\n      state = state.map((item) =>\r\n        item.id === action.payload.projectId\r\n          ? {\r\n              ...item,\r\n              tasks: item.tasks?.map((task) =>\r\n                task.number === action.payload.taskNumber\r\n                  ? { ...task, status: action.payload.taskStatus }\r\n                  : task\r\n              ),\r\n            }\r\n          : item\r\n      );\r\n      localStorage.setItem('01MyToDoList23', JSON.stringify(state));\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}